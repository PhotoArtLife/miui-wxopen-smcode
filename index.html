<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>miui-wxopen-smcode by PhotoArtLife</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">miui-wxopen-smcode</h1>
      <h2 class="project-tagline">微信小程序官方API文档及Demo演示</h2>
      <a href="https://github.com/PhotoArtLife/miui-wxopen-smcode" class="btn">View on GitHub</a>
      <a href="https://github.com/PhotoArtLife/miui-wxopen-smcode/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/PhotoArtLife/miui-wxopen-smcode/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>
</p>
    微信小程序官方API文档及Demo演示
    
    
    
    
    

<pre><code>&lt;link rel="stylesheet" href="https://github.com/PhotoArtLife/miui-wxopen-smcode/blob/master/gitbook/style.css"&gt;

&lt;link rel="stylesheet" href="https://github.com/PhotoArtLife/miui-wxopen-smcode/blob/master/gitbook/gitbook-plugin-highlight/website.css"&gt;

&lt;link rel="stylesheet" href="https://github.com/PhotoArtLife/miui-wxopen-smcode/blob/master/gitbook/gitbook-plugin-search/search.css"&gt;


&lt;meta name="HandheldFriendly" content="true"&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"&gt;
&lt;meta name="apple-mobile-web-app-capable" content="yes"&gt;
&lt;meta name="apple-mobile-web-app-status-bar-style" content="black"&gt;
&lt;link rel="apple-touch-icon-precomposed" sizes="152x152"
      href="gitbook/images/apple-touch-icon-precomposed-152.png"&gt;
&lt;link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon"&gt;


&lt;link rel="next" href="demo.html"&gt;
</code></pre>

<p>
</p>

<div>
    <div>

        <div>
            <div>


                <ul>


                    <li>

                        <a href="./">


                            简易教程

                        </a>

                    </li>

                    <li>

                        <a href="framework/MINA.html">


                            框架

                        </a>

                    </li>

                    <li>

                        <a href="component/">


                            组件

                        </a>

                    </li>

                    <li>

                        <a href="api/">


                            API

                        </a>

                    </li>

                    <li>

                        <a href="devtools/devtools.html">


                            工具

                        </a>

                    </li>

                    <li>

                        <a href="qa/qa.html">


                            Q&amp;A

                        </a>

                    </li>
                    <li>

                        <a href="introduction">


                            介绍

                        </a>

                    </li>
                    <li>

                        <a href="design">


                            设计

                        </a>

                    </li>
                    <li>

                        <a href="product">


                            运营

                        </a>

                    </li>

                    <li>

                        <a href="https://github.com/Notedown-cn/wxopen">
                            文档Github打包下载
                        </a>

                    </li>


                </ul>


                
                <div id="book-search-input">
                    
                        
                        
                        
                    
                </div>
            </div>
        </div>

        <div>


             


                <ul>


                    <li>

                        <a href="./">


                            简易教程

                        </a>


                    </li>

                    <li>

                        <a href="demo.html">


                            体验小程序

                        </a>


                    </li>


                </ul>


             


        </div>

        <div>

            <div>

                

                <div tabindex="-1">
                    <div>

                        <div id="book-search-results">
                            <div>

                                 

                                    <p>​
                                        本文档将带你一步步创建完成一个微信小程序，并可以在手机上体验该小程序的实际效果。这个小程序的首页将会显示欢迎语以及当前用户的微信头像，点击头像，可以在新开的页面中查看当前小程序的启动日志。<a href="demo/quickstart.zip">下载源码</a></p>
                                    <h3 id="1-获取微信小程序的appid">
<a id="1-获取微信小程序的appid" class="anchor" href="#1-%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84appid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. 获取微信小程序的AppID</h3>
                                    <p>首先，我们需要拥有一个帐号，如果你能看到该文档，我们应当已经邀请并为你创建好一个帐号。注意不可直接使用服务号或订阅号的AppID。
                                        利用提供的帐号，登录<a href="https://mp.weixin.qq.com/">https://mp.weixin.qq.com</a>
                                        ，就可以在网站的“设置”-“开发者设置”中，查看到微信小程序的AppID了。</p>
                                    <p><img src="image/setting.png"></p>
                                    <p><strong>注意：如果我们不是用注册时绑定的管理员微信号，在手机上体验该小程序。那么我们还需要操作“绑定开发者”。即在“用户身份”-“开发者”模块，绑定上需要体验该小程序的微信号。本教程默认注册帐号、体验都是使用管理员微信号。</strong>
                                    </p>
                                    <h3 id="2-创建项目">
<a id="2-创建项目" class="anchor" href="#2-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. 创建项目</h3>
                                    <p>​ 我们需要通过<a href="devtools/devtools.html">开发者工具</a>，来完成小程序创建和代码编辑。</p>
                                    <p>​
                                        开发者工具安装完成后，打开并使用微信扫码登录。选择创建“项目”，填入上文获取到的AppID，设置一个本地项目的名称（非小程序名称），比如“我的第一个项目”，并选择一个本地的文件夹作为代码存储的目录，点击“新建项目”就可以了。</p>
                                    <p>​ 为方便初学者了解微信小程序的基本代码结构，在创建过程中，如果选择的本地文件夹是个空文件夹，开发者工具会提示，是否需要创建一个quick
                                        start项目。选择“是”，开发者工具会帮助我们在开发目录里生成一个简单的demo。</p>
                                    <p><img src="image/new_project.png"></p>
                                    <p>​
                                        项目创建成功后，我们就可以点击该项目，进入并看到完整的开发者工具界面，点击左侧导航，在“编辑”里可以查看和编辑我们的代码，在“调试”里可以测试代码并模拟小程序在微信客户端效果，在“项目”里可以发送到手机里预览实际效果。</p>
                                    <h3 id="3-编写代码">
<a id="3-编写代码" class="anchor" href="#3-%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3. 编写代码</h3>
<h4 id="创建小程序实例">
<a id="创建小程序实例" class="anchor" href="#%E5%88%9B%E5%BB%BA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E4%BE%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>创建小程序实例</h4>
                                    <p>​
                                        点击开发者工具左侧导航的“编辑”，我们可以看到这个项目，已经初始化并包含了一些简单的代码文件。最关键也是必不可少的，是app.js、app.json、app.wxss这三个。其中，<code>.js</code>后缀的是脚本文件，<code>.json</code>后缀的文件是配置文件，<code>.wxss</code>后缀的是样式表文件。微信小程序会读取这些文件，并生成<a href="framework/app-service/app.html">小程序实例</a>。</p>
                                    <p>​ 下面我们简单了解这三个文件的功能，方便修改以及从头开发自己的微信小程序。</p>
                                    <p>​
                                        app.js是小程序的脚本代码。我们可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量。调用MINA提供的丰富的API，如本例的同步存储及同步读取本地数据。想了解更多可用API，可参考<a href="api/">API文档</a></p>
<pre><code class="lang-javascript">//app.js
App({
  onLaunch: function () {
    //调用API从本地缓存中获取数据
    var logs = wx.getStorageSync('logs') || []
    logs.unshift(Date.now())
    wx.setStorageSync('logs', logs)
  },
  getUserInfo:function(cb){
    var that = this;
    if(this.globalData.userInfo){
      typeof cb == "function" &amp;&amp; cb(this.globalData.userInfo)
    }else{
      //调用登录接口
      wx.login({
        success: function () {
          wx.getUserInfo({
            success: function (res) {
              that.globalData.userInfo = res.userInfo;
              typeof cb == "function" &amp;&amp; cb(that.globalData.userInfo)
            }
          })
        }
      });
    }
  },
  globalData:{
    userInfo:null
  }
})</code></pre>
                                    <p>​
                                        app.json是对整个小程序的全局配置。我们可以在这个文件中配置小程序是由哪些页面组成，配置小程序的窗口背景色，配置导航条样式，配置默认标题。注意该文件不可添加任何注释。更多可配置项可参考<a href="framework/config.html">配置详解</a></p>
<pre><code class="lang-json">{
  "pages":[
    "pages/index/index",
    "pages/logs/logs"
  ],
  "window":{
    "backgroundTextStyle":"light",
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTitleText": "WeChat",
    "navigationBarTextStyle":"black"
  }
}</code></pre>
                                    <p>​ app.wxss是整个小程序的公共样式表。我们可以在页面组件的class属性上直接使用app.wxss中声明的样式规则。</p>
<pre><code class="lang-css">/**app.wxss**/
.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding: 200rpx 0;
  box-sizing: border-box;
}</code></pre>
                                    <h4 id="创建页面">
<a id="创建页面" class="anchor" href="#%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>创建页面</h4>
                                    <p>​
                                        在这个教程里，我们有两个页面，index页面和logs页面，即欢迎页和小程序启动日志的展示页，他们都在pages目录下。微信小程序中的每一个页面的【路径+页面名】都需要写在app.json的pages中，且pages中的第一个页面是小程序的首页。</p>
                                    <p>​ 每一个<a href="framework/app-service/page.html">小程序页面</a>是由同路径下同名的四个不同后缀文件的组成，如：index.js、index.wxml、index.wxss、index.json。<code>.js</code>后缀的文件是脚本文件，<code>.json</code>后缀的文件是配置文件，<code>.wxss</code>后缀的是样式表文件，<code>.wxml</code>后缀的文件是页面结构文件。
                                    </p>
                                    <p>​ index.wxml是页面的结构文件：</p>
<pre><code class="lang-html">&lt;!--index.wxml--&gt;
&lt;view class="container"&gt;
  &lt;view  bindtap="bindViewTap" class="userinfo"&gt;
    &lt;image class="userinfo-avatar" src="{{userInfo.avatarUrl}}" background-size="cover"&gt;&lt;/image&gt;
    &lt;text class="userinfo-nickname"&gt;{{userInfo.nickName}}&lt;/text&gt;
  &lt;/view&gt;
  &lt;view class="usermotto"&gt;
    &lt;text class="user-motto"&gt;{{motto}}&lt;/text&gt;
  &lt;/view&gt;
&lt;/view&gt;</code></pre>
                                    <p>​ 本例中使用了<a href="component/view.html"><code>&lt;view/&gt;</code></a>、<a href="component/image.html"><code>&lt;image/&gt;</code></a>、<a href="component/text.html"><code>&lt;text/&gt;</code></a>来搭建页面结构，绑定数据和交互处理函数。
                                    </p>
                                    <p>​ index.js是页面的脚本文件，在这个文件中我们可以监听并处理页面的生命周期函数、获取小程序实例，声明并处理数据，响应页面交互事件等。</p>
<pre><code class="lang-javascript">//index.js
//获取应用实例
var app = getApp()
Page({
  data: {
    motto: 'Hello World',
    userInfo: {}
  },
  //事件处理函数
  bindViewTap: function() {
    wx.navigateTo({
      url: '../logs/logs'
    })
  },
  onLoad: function () {
    console.log('onLoad')
    var that = this
    //调用应用实例的方法获取全局数据
    app.getUserInfo(function(userInfo){
      //更新数据
      that.setData({
        userInfo:userInfo
      })
    })
  }
})</code></pre>
                                    <p>​ index.wxss是页面的样式表：</p>
<pre><code class="lang-css">/**index.wxss**/
.userinfo {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.userinfo-avatar {
  width: 128rpx;
  height: 128rpx;
  margin: 20rpx;
  border-radius: 50%;
}

.userinfo-nickname {
  color: #aaa;
}

.usermotto {
  margin-top: 200px;
}</code></pre>
                                    <p>​
                                        页面的样式表是非必要的。当有页面样式表时，页面的样式表中的样式规则会层叠覆盖app.wxss中的样式规则。如果不指定页面的样式表，也可以在页面的结构文件中直接使用app.wxss中指定的样式规则。</p>
                                    <p>​ index.json是页面的配置文件：</p>
                                    <p>​
                                        页面的配置文件是非必要的。当有页面的配置文件时，配置项在该页面会覆盖app.json的window中相同的配置项。如果没有指定的页面配置文件，则在该页面直接使用app.json中的默认配置。</p>
                                    <p>​ logs的页面结构</p>
<pre><code class="lang-html">&lt;!--logs.wxml--&gt;
&lt;view class="container log-list"&gt;
  &lt;block wx:for-items="{{logs}}" wx:for-item="log"&gt;
    &lt;text class="log-item"&gt;{{index + 1}}. {{log}}&lt;/text&gt;
  &lt;/block&gt;
&lt;/view&gt;</code></pre>
                                    <p>​ logs页面使用<a href="framework/view/wxml/list.html#block-wxfor"><code>&lt;block/&gt;</code></a>控制标签来组织代码，在<code>
                                        &lt;block/&gt;</code>上使用<a href="framework/view/wxml/list.html#block-wxfor"><code>wx:for-items</code></a>绑定<code>logs</code>数据，并将<code>logs</code>数据循环展开节点
                                    </p>
<pre><code class="lang-js">//logs.js
var util = require('../../utils/util.js')
Page({
  data: {
    logs: []
  },
  onLoad: function () {
    this.setData({
      logs: (wx.getStorageSync('logs') || []).map(function (log) {
        return util.formatTime(new Date(log))
      })
    })
  }
})</code></pre>
                                    <p>运行结果如下：</p>
                                    <p><img src="image/start_result.png"></p>
                                    <h3 id="4-手机预览">
<a id="4-手机预览" class="anchor" href="#4-%E6%89%8B%E6%9C%BA%E9%A2%84%E8%A7%88" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4. 手机预览</h3>
                                    <p>​ 开发者工具左侧菜单栏选择"项目"，点击"预览"，扫码后即可在微信客户端中体验。</p>
                                    <p><img src="image/start_preview.png"></p>

                                 

                            </div>
                            <div>
                                <div>

                                    <h1>
<a id="-个结果----------------------------------------" class="anchor" href="#-%E4%B8%AA%E7%BB%93%E6%9E%9C----------------------------------------" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a> 个结果
                                        ""</h1>
                                    <ul></ul>

                                </div>
                                <div>

                                    <h1>
<a id="没有找到相关内容-" class="anchor" href="#%E6%B2%A1%E6%9C%89%E6%89%BE%E5%88%B0%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>没有找到相关内容 ""</h1>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="footer">
                    <ul>
                        <li><a href="">关于腾讯</a></li>
                        <li><a href="">服务协议</a></li>
                        <li><a href="">运营规范</a></li>
                        <li><a href="">辟谣中心</a></li>
                        <li><a href="">客服中心</a></li>
                        <li><a href="">联系邮箱</a></li>
                        <li><a href="">侵权投诉</a></li>
                        <li>
                            <p>Copyright © 2012- Tencent. All
                                Rights Reserved.</p>
                        </li>
                    </ul>
                </div>

            </div>


            <a href="demo.html">
                <i></i>
            </a>


        </div>
    </div>


    
    


    


    


    


    


    


</div>

<p>
</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/PhotoArtLife/miui-wxopen-smcode">miui-wxopen-smcode</a> is maintained by <a href="https://github.com/PhotoArtLife">PhotoArtLife</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
